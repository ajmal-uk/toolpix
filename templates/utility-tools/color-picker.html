<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Advanced Color Picker tool to select colors from images, screen, websites, URLs, clipboard, and search. Supports HEX, RGB, HSL, and CMYK conversions with an interactive UI.">
    <meta name="keywords" content="color picker, advanced color picker, HEX, RGB, HSL, CMYK, web design, color tool, interactive">
    <meta name="author" content="Your Name">
    <meta name="robots" content="index, follow">
    <title>Advanced Color Picker with Menus</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: auto;
            font-family: 'Arial', sans-serif;
        }
        .color-picker-container {
            min-height: 100vh;
            width: 100%;
            margin: 0;
            padding: 20px;
            background: #1a202c;
            display: flex;
            flex-direction: column;
            color: #e2e8f0;
        }
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .color-preview {
            width: 150px;
            height: 150px;
            border-radius: 12px;
            border: 3px solid #e2e8f0;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        .color-preview:hover {
            transform: scale(1.1);
        }
        .controls {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 10px;
            margin-top: 16px;
        }
        .color-swatch {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            cursor: pointer;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .color-swatch:hover {
            transform: scale(1.15);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        .image-preview {
            max-width: 100%;
            max-height: 250px;
            object-fit: contain;
            border: 3px solid #e2e8f0;
            border-radius: 10px;
            cursor: crosshair;
            transition: transform 0.3s;
        }
        .image-preview:hover {
            transform: scale(1.02);
        }
        .canvas-hidden {
            display: none;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background: #f7fafc;
            margin: 5% auto;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 650px;
            text-align: center;
            position: relative;
            animation: slideIn 0.3s;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            color: #2d3748;
        }
        @keyframes slideIn {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal-content h2 {
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 1.5em;
        }
        .modal-content button {
            margin: 5px;
            padding: 12px 25px;
            background: #edf2f7;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .modal-content button:hover {
            background: #d1d8e0;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px;
            cursor: pointer;
            color: #718096;
            transition: color 0.3s;
        }
        .close-modal:hover {
            color: #4a5568;
        }
        .drop-zone {
            border: 3px dashed #cbd5e0;
            padding: 25px;
            text-align: center;
            margin-top: 20px;
            transition: all 0.3s;
            border-radius: 8px;
            background: #f1f5f9;
        }
        .drop-zone.dragover {
            background: #e6eef6;
            border-color: #90a4ae;
        }
        .input-field {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            font-size: 16px;
            color: #2d3748;
        }
        .error {
            color: #e53e3e;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }
        .color-picker-canvas {
            width: 250px;
            height: 250px;
            border-radius: 0;
            cursor: crosshair;
            touch-action: none;
            border: 2px solid #e2e8f0;
        }
        .color-slider {
            width: 25px;
            height: 250px;
            background: linear-gradient(to top, #000000, #ffffff, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);
            border-radius: 10px;
            position: relative;
            margin-left: 15px;
            cursor: ns-resize;
            border: 2px solid #e2e8f0;
        }
        .slider-handle {
            width: 25px;
            height: 25px;
            background: #fff;
            border: 3px solid #e2e8f0;
            border-radius: 50%;
            position: absolute;
            left: -6px;
            transform: translateY(-50%);
            cursor: ns-resize;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .notes-docs {
            margin-top: 20px;
            padding: 20px;
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 10px;
            flex-shrink: 0;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #2d3748;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            .color-picker-canvas, .color-slider {
                width: 150px;
                height: 150px;
            }
            .slider-handle {
                width: 20px;
                height: 20px;
            }
            .color-preview {
                width: 100px;
                height: 100px;
            }
            .main-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <canvas id="imageCanvas" class="canvas-hidden"></canvas>
    <canvas id="colorPickerCanvas" class="color-picker-canvas"></canvas>
    <div id="colorSlider" class="color-slider">
        <div id="sliderHandle" class="slider-handle"></div>
    </div>

    <script type="text/babel">
        const { createRoot } = ReactDOM;

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            if (max === min) { h = s = 0; } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return [Math.round(h * 360), Math.round(s * 100), Math.round(l * 100)];
        }

        function rgbToCmyk(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const k = 1 - Math.max(r, g, b);
            if (k === 1) return [0, 0, 0, 100];
            const c = (1 - r - k) / (1 - k);
            const m = (1 - g - k) / (1 - k);
            const y = (1 - b - k) / (1 - k);
            return [Math.round(c * 100), Math.round(m * 100), Math.round(y * 100), Math.round(k * 100)];
        }

        function rgbToHex(r, g, b) {
            return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase()}`;
        }

        function hslToRgb(h, s, l) {
            s /= 100; l /= 100;
            const c = (1 - Math.abs(2 * l - 1)) * s;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l - c / 2;
            let r = 0, g = 0, b = 0;
            if (0 <= h && h < 60) { r = c; g = x; b = 0; }
            else if (60 <= h && h < 120) { r = x; g = c; b = 0; }
            else if (120 <= h && h < 180) { r = 0; g = c; b = x; }
            else if (180 <= h && h < 240) { r = 0; g = x; b = c; }
            else if (240 <= h && h < 300) { r = x; g = 0; b = c; }
            else if (300 <= h && h < 360) { r = c; g = 0; b = x; }
            r = Math.round((r + m) * 255);
            g = Math.round((g + m) * 255);
            b = Math.round((b + m) * 255);
            return { r, g, b };
        }

        function ColorPicker() {
            const [color, setColor] = React.useState({ r: 255, g: 153, b: 51 });
            const [recentColors, setRecentColors] = React.useState([]);
            const [image, setImage] = React.useState(null);
            const [modal, setModal] = React.useState(null);
            const [error, setError] = React.useState('');
            const canvasRef = React.useRef(null);
            const fileInputRef = React.useRef(null);
            const colorPickerCanvasRef = React.useRef(null);
            const colorSliderRef = React.useRef(null);
            const sliderHandleRef = React.useRef(null);
            const modalRef = React.useRef(null);
            const isDragging = React.useRef(false);

            React.useEffect(() => {
                const canvas = colorPickerCanvasRef.current;
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                const gradient = ctx.createLinearGradient(0, 0, width, 0);
                gradient.addColorStop(0, '#000000');
                gradient.addColorStop(0.2, '#FF9933');
                gradient.addColorStop(0.4, '#FFFFFF');
                gradient.addColorStop(0.6, '#FF0000');
                gradient.addColorStop(0.8, '#00FF00');
                gradient.addColorStop(1, '#0000FF');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);

                const handleInteraction = (e) => {
                    if (!isDragging.current) return;
                    const rect = canvas.getBoundingClientRect();
                    const x = Math.max(0, Math.min(width, e.clientX - rect.left));
                    const y = Math.max(0, Math.min(height, e.clientY - rect.top));
                    const imageData = ctx.getImageData(x, y, 1, 1).data;
                    setColor({ r: imageData[0], g: imageData[1], b: imageData[2] });
                    setRecentColors(prev => [{ r: imageData[0], g: imageData[1], b: imageData[2] }, ...prev.filter(c => c.r !== imageData[0] || c.g !== imageData[1] || c.b !== imageData[2])].slice(0, 12));
                };

                const handleSliderInteraction = (e) => {
                    if (!isDragging.current) return;
                    const rect = colorSliderRef.current.getBoundingClientRect();
                    const pos = Math.max(0, Math.min(250, e.clientY - rect.top));
                    sliderHandleRef.current.style.top = `${pos}px`;
                    const lightness = (pos / 250) * 100;
                    const [h, s] = rgbToHsl(color.r, color.g, color.b);
                    const newColor = hslToRgb(h, s, lightness);
                    setColor(newColor);
                    setRecentColors(prev => [{ ...newColor }, ...prev.filter(c => c.r !== newColor.r || c.g !== newColor.g || c.b !== newColor.b)].slice(0, 12));
                };

                canvas.addEventListener('mousedown', () => isDragging.current = true);
                canvas.addEventListener('mousemove', handleInteraction);
                canvas.addEventListener('mouseup', () => isDragging.current = false);
                canvas.addEventListener('mouseleave', () => isDragging.current = false);
                colorSliderRef.current.addEventListener('mousedown', () => isDragging.current = true);
                colorSliderRef.current.addEventListener('mousemove', handleSliderInteraction);
                colorSliderRef.current.addEventListener('mouseup', () => isDragging.current = false);
                colorSliderRef.current.addEventListener('mouseleave', () => isDragging.current = false);
                colorSliderRef.current.addEventListener('click', handleSliderInteraction);

                return () => {
                    canvas.removeEventListener('mousedown', () => {});
                    canvas.removeEventListener('mousemove', handleInteraction);
                    canvas.removeEventListener('mouseup', () => {});
                    canvas.removeEventListener('mouseleave', () => {});
                    colorSliderRef.current.removeEventListener('mousedown', () => {});
                    colorSliderRef.current.removeEventListener('mousemove', handleSliderInteraction);
                    colorSliderRef.current.removeEventListener('mouseup', () => {});
                    colorSliderRef.current.removeEventListener('mouseleave', () => {});
                    colorSliderRef.current.removeEventListener('click', handleSliderInteraction);
                };
            }, [color]);

            React.useEffect(() => {
                const handleKeyDown = (e) => {
                    if (modal && e.key === 'Escape') closeModal();
                };
                document.addEventListener('keydown', handleKeyDown);
                return () => document.removeEventListener('keydown', handleKeyDown);
            }, [modal]);

            const pickFromScreen = async () => {
                if (!window.EyeDropper) {
                    setError('EyeDropper API not supported. Use another method.');
                    return;
                }
                try {
                    const eyeDropper = new window.EyeDropper();
                    const result = await eyeDropper.open();
                    const [r, g, b] = result.sRGBHex.match(/[0-9a-f]{2}/gi).map(x => parseInt(x, 16));
                    setColor({ r, g, b });
                    setRecentColors(prev => [{ r, g, b }, ...prev.filter(c => c.r !== r || c.g !== g || c.b !== b)].slice(0, 12));
                    setModal(null);
                    setError('');
                } catch {
                    setError('Failed to pick color from screen.');
                }
            };

            const handleImageUpload = (e) => {
                const file = e.target.files?.[0] || e.dataTransfer?.files?.[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const img = new Image();
                        img.onload = () => {
                            setImage(img.src);
                            const canvas = canvasRef.current;
                            canvas.width = img.width;
                            canvas.height = img.height;
                            canvas.getContext('2d').drawImage(img, 0, 0);
                            setModal(null);
                            setError('');
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleCanvasClick = (e) => {
                if (!image) return;
                const canvas = canvasRef.current;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const [r, g, b] = canvas.getContext('2d').getImageData(x, y, 1, 1).data;
                setColor({ r, g, b });
                setRecentColors(prev => [{ r, g, b }, ...prev.filter(c => c.r !== r || c.g !== g || c.b !== b)].slice(0, 12));
            };

            const handleColorChange = (e) => {
                const hex = e.target.value.replace('#', '').toUpperCase();
                if (/^[0-9A-F]{6}$/.test(hex)) {
                    const [r, g, b] = hex.match(/.{2}/g).map(x => parseInt(x, 16));
                    setColor({ r, g, b });
                    setRecentColors(prev => [{ r, g, b }, ...prev.filter(c => c.r !== r || c.g !== g || c.b !== b)].slice(0, 12));
                    setError('');
                } else {
                    setError('Invalid HEX format. Use #RRGGBB.');
                }
            };

            const handleClipboardPaste = () => {
                navigator.clipboard.readText().then(text => {
                    const hex = text.replace('#', '').toUpperCase();
                    if (/^[0-9A-F]{6}$/.test(hex)) {
                        const [r, g, b] = hex.match(/.{2}/g).map(x => parseInt(x, 16));
                        setColor({ r, g, b });
                        setRecentColors(prev => [{ r, g, b }, ...prev.filter(c => c.r !== r || c.g !== g || c.b !== b)].slice(0, 12));
                        setModal(null);
                        setError('');
                    } else {
                        setError('Invalid HEX in clipboard.');
                    }
                }).catch(() => setError('Clipboard access denied.'));
            };

            const handleUrlSubmit = async (urlType) => {
                const url = document.querySelector(`#${urlType}-input`).value;
                if (!url) {
                    setError('Please enter a URL.');
                    return;
                }
                try {
                    const response = await fetch(url, { mode: 'cors' });
                    if (!response.ok) throw new Error('Invalid URL.');
                    const blob = await response.blob();
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const img = new Image();
                        img.onload = () => {
                            setImage(event.target.result);
                            const canvas = canvasRef.current;
                            canvas.width = img.width;
                            canvas.height = img.height;
                            canvas.getContext('2d').drawImage(img, 0, 0);
                            setModal(null);
                            setError('');
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(blob);
                } catch (err) {
                    setError(`Failed to load ${urlType}: ${err.message}`);
                }
            };

            const openModal = (type) => { setModal(type); setError(''); };
            const closeModal = () => { setModal(null); setError(''); };
            const resetColor = () => { setColor({ r: 255, g: 153, b: 51 }); setRecentColors([]); setImage(null); };

            const handleDrop = (e) => {
                e.preventDefault();
                e.target.classList.remove('dragover');
                handleImageUpload(e);
            };
            const handleDragOver = (e) => { e.preventDefault(); e.target.classList.add('dragover'); };
            const handleDragLeave = (e) => { e.preventDefault(); e.target.classList.remove('dragover'); };

            const [h, s, l] = rgbToHsl(color.r, color.g, color.b);
            const [c, m, y, k] = rgbToCmyk(color.r, color.g, color.b);
            const hex = rgbToHex(color.r, color.g, color.b);

            return (
                <div className="color-picker-container">
                    <div className="header">
                        <h1 className="text-4xl font-bold mb-4 text-gray-100">Advanced Color Picker</h1>
                        <button onClick={resetColor} className="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200">Reset</button>
                    </div>
                    <div className="mb-6 flex flex-wrap gap-3 justify-center">
                        <div className="tooltip">
                            <button onClick={() => openModal('upload')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Upload Image</button>
                            <span className="tooltiptext">Upload an image to pick colors from</span>
                        </div>
                        <div className="tooltip">
                            <button onClick={() => openModal('screen')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Color on Screen</button>
                            <span className="tooltiptext">Pick color directly from your screen</span>
                        </div>
                        <div className="tooltip">
                            <button onClick={() => openModal('website')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Website URL</button>
                            <span className="tooltiptext">Load colors from a website</span>
                        </div>
                        <div className="tooltip">
                            <button onClick={() => openModal('imageUrl')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Image URL</button>
                            <span className="tooltiptext">Load colors from an image URL</span>
                        </div>
                        <div className="tooltip">
                            <button onClick={() => openModal('clipboard')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Paste Clipboard</button>
                            <span className="tooltiptext">Paste a HEX code from clipboard</span>
                        </div>
                        <div className="tooltip">
                            <button onClick={() => openModal('search')} className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition duration-200">Search</button>
                            <span className="tooltiptext">Search by color name (e.g., red)</span>
                        </div>
                    </div>
                    <div className="main-content">
                        <div className="flex flex-col md:flex-row gap-8">
                            <div className="flex-1 bg-gray-800 p-6 rounded-xl shadow-lg">
                                <div className="color-preview mb-6" style={{ backgroundColor: `rgb(${color.r}, ${color.g}, ${color.b})` }} title={`RGB: ${color.r}, ${color.g}, ${color.b}`}></div>
                                <div className="controls">
                                    <canvas ref={colorPickerCanvasRef} className="color-picker-canvas mb-4"></canvas>
                                    <div ref={colorSliderRef} className="color-slider">
                                        <div ref={sliderHandleRef} className="slider-handle" style={{ top: `${(l / 100) * 250}px` }}></div>
                                    </div>
                                </div>
                                <div className="space-y-4">
                                    <div><label className="block text-sm font-medium">HEX:</label><input type="text" value={`#${hex}`} onChange={handleColorChange} className="w-full bg-gray-700 p-3 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter HEX (e.g., #FF0000)" /></div>
                                    <div><label className="block text-sm font-medium">RGB:</label><input type="text" value={`${color.r}, ${color.g}, ${color.b}`} readOnly className="w-full bg-gray-700 p-3 rounded-lg text-white" /></div>
                                    <div><label className="block text-sm font-medium">HSL:</label><input type="text" value={`${h}, ${s}%, ${l}%`} readOnly className="w-full bg-gray-700 p-3 rounded-lg text-white" /></div>
                                    <div><label className="block text-sm font-medium">CMYK:</label><input type="text" value={`${c}%, ${m}%, ${y}%, ${k}%`} readOnly className="w-full bg-gray-700 p-3 rounded-lg text-white" /></div>
                                </div>
                                {error && <div className="error" style={{ display: 'block' }}>{error}</div>}
                            </div>
                            <div className="flex-1 bg-gray-800 p-6 rounded-xl shadow-lg">
                                {image && <img src={image} className="image-preview mb-6" onClick={handleCanvasClick} alt="Color pick area" />}
                                <div className="color-grid">
                                    {recentColors.map((c, i) => (
                                        <div key={`${c.r}-${c.g}-${c.b}-${i}`} className="color-swatch" style={{ backgroundColor: `rgb(${c.r}, ${c.g}, ${c.b})` }} onClick={() => { setColor(c); setRecentColors(prev => [{ ...c }, ...prev.filter(cc => cc.r !== c.r || cc.g !== c.g || cc.b !== c.b)].slice(0, 12)); }} title={`RGB: ${c.r}, ${c.g}, ${c.b}`} />
                                    ))}
                                </div>
                            </div>
                        </div>
                        <div className="notes-docs">
                            <h2 className="text-2xl font-bold mb-4">Notes & Documentation</h2>
                            <p><strong>Usage:</strong> Select colors using various methods and view in multiple formats.</p>
                            <p><strong>Features:</strong></p>
                            <ul className="list-disc pl-5">
                                <li>Interactive canvas and slider for color selection.</li>
                                <li>Recent colors grid for quick access.</li>
                                <li>Tooltips for button functions.</li>
                                <li>Reset option to clear selections.</li>
                            </ul>
                            <p><strong>Privacy:</strong> All processing is local.</p>
                            <p><strong>Support:</strong> Best with modern browsers supporting EyeDropper API.</p>
                        </div>
                    </div>
                    {modal && (
                        <div className="modal" onClick={closeModal} style={{ display: 'block' }}>
                            <div className="modal-content" ref={modalRef} onClick={e => e.stopPropagation()} tabIndex="-1">
                                <span className="close-modal" onClick={closeModal}>&times;</span>
                                <h2>{modal.charAt(0).toUpperCase() + modal.slice(1)}</h2>
                                {modal === 'upload' && (
                                    <div>
                                        <input type="file" accept="image/*" ref={fileInputRef} onChange={handleImageUpload} className="hidden" id="uploadInput" />
                                        <label htmlFor="uploadInput" className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-300 transition duration-200 block mb-2">Select File</label>
                                        <div className="drop-zone" onDrop={handleDrop} onDragOver={handleDragOver} onDragLeave={handleDragLeave}>Drop image here or click to browse</div>
                                        <p className="text-gray-600 text-sm mt-2">Local processing ensures privacy.</p>
                                    </div>
                                )}
                                {modal === 'screen' && <button onClick={pickFromScreen} className="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Pick Color</button>}
                                {modal === 'website' && (
                                    <div>
                                        <input type="text" id="website-input" placeholder="https://example.com" className="input-field" />
                                        <button onClick={() => handleUrlSubmit('website')} className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 mt-2">Load Website</button>
                                    </div>
                                )}
                                {modal === 'imageUrl' && (
                                    <div>
                                        <input type="text" id="imageUrl-input" placeholder="https://example.com/image.jpg" className="input-field" />
                                        <button onClick={() => handleUrlSubmit('imageUrl')} className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 mt-2">Load Image</button>
                                    </div>
                                )}
                                {modal === 'clipboard' && (
                                    <div>
                                        <button onClick={handleClipboardPaste} className="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 mb-2">Paste from Clipboard</button>
                                        <input type="text" placeholder="#RRGGBB" className="input-field" onChange={handleColorChange} />
                                    </div>
                                )}
                                {modal === 'search' && (
                                    <div>
                                        <input type="text" placeholder="e.g., red" className="input-field" onChange={(e) => {
                                            const colorName = e.target.value.toLowerCase();
                                            const colors = { red: [255, 0, 0], green: [0, 255, 0], blue: [0, 0, 255], yellow: [255, 255, 0] };
                                            if (colors[colorName]) {
                                                setColor({ r: colors[colorName][0], g: colors[colorName][1], b: colors[colorName][2] });
                                                setRecentColors(prev => [{ r: colors[colorName][0], g: colors[colorName][1], b: colors[colorName][2] }, ...prev.filter(c => c.r !== colors[colorName][0] || c.g !== colors[colorName][1] || c.b !== colors[colorName][2])].slice(0, 12));
                                                setModal(null);
                                                setError('');
                                            } else {
                                                setError('Color not recognized.');
                                            }
                                        }} />
                                    </div>
                                )}
                                {error && <div className="error" style={{ display: 'block' }}>{error}</div>}
                                <button onClick={closeModal} className="mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300">Cancel</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<ColorPicker />);
    </script>
</body>
</html>